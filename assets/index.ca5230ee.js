var A=Object.defineProperty,R=Object.defineProperties;var T=Object.getOwnPropertyDescriptors;var k=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable;var E=(t,e,o)=>e in t?A(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,h=(t,e)=>{for(var o in e||(e={}))I.call(e,o)&&E(t,o,e[o]);if(k)for(var o of k(e))V.call(e,o)&&E(t,o,e[o]);return t},b=(t,e)=>R(t,T(e));import{u as w,r as f,o as d,c as g,a as p,b as u,d as c,w as l,e as O,F as D,f as _,t as L,g as S,h as x,i as N,j as $,k as C}from"./vendor.6e3e509c.js";const U=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function o(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerpolicy&&(a.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?a.credentials="include":r.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(r){if(r.ep)return;r.ep=!0;const a=o(r);fetch(r.href,a)}};U();const B="modulepreload",P={},F="/",i=function(e,o){return!o||o.length===0?e():Promise.all(o.map(n=>{if(n=`${F}${n}`,n in P)return;P[n]=!0;const r=n.endsWith(".css"),a=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${a}`))return;const s=document.createElement("link");if(s.rel=r?"stylesheet":B,r||(s.as="script",s.crossOrigin=""),s.href=n,document.head.appendChild(s),r)return new Promise((m,j)=>{s.addEventListener("load",m),s.addEventListener("error",j)})})).then(()=>e())};const G={key:0,class:"navbar-container"},H={class:"navbar"},q=u("div",{class:"spacer"},null,-1),J=_("LOGIN"),W=_("REGISTER"),z={key:1,class:"navbar-container"},K={class:"navbar"},M=u("div",{class:"spacer"},null,-1),Q=_("DASHBOARD"),X=_("LOGOUT"),Y={class:"main-container"},Z={class:"main"},ee={setup(t){const e=w();return e.dispatch("usercount"),(o,n)=>{const r=f("router-link"),a=f("router-view");return d(),g(D,null,[p(e).state.token?O("",!0):(d(),g("div",G,[u("div",H,[c(r,{class:"brand",to:"/"},{default:l(()=>[_(L(p(e).state.app.name||"Logbook"),1)]),_:1}),q,c(r,{class:"link",to:"/login"},{default:l(()=>[J]),_:1}),c(r,{class:"link",to:"/register"},{default:l(()=>[W]),_:1})])])),p(e).state.token?(d(),g("div",z,[u("div",K,[c(r,{class:"brand",to:"/"},{default:l(()=>[_(L(p(e).state.app.name||"Logbook"),1)]),_:1}),M,c(r,{class:"link",to:"/"},{default:l(()=>[Q]),_:1}),c(r,{class:"link",to:"/logout"},{default:l(()=>[X]),_:1})])])):O("",!0),u("div",Y,[u("div",Z,[c(a)])])],64)}}},te={admin:()=>i(()=>import("./admin.463fcb6a.js"),["assets/admin.463fcb6a.js","assets/vendor.6e3e509c.js"]),blank:()=>i(()=>import("./blank.2241ad53.js"),["assets/blank.2241ad53.js","assets/vendor.6e3e509c.js"]),default:ee,superadmin:()=>i(()=>import("./superadmin.992482eb.js"),["assets/superadmin.992482eb.js","assets/vendor.6e3e509c.js"])};function oe(t){return t.map(e=>{var o;return{path:e.path,component:te[((o=e.meta)==null?void 0:o.layout)||"default"],children:[b(h({},e),{path:""})]}})}const re=[{name:"index",path:"/",component:()=>i(()=>import("./index.2b32a8f1.js"),["assets/index.2b32a8f1.js","assets/vendor.6e3e509c.js"]),props:!0,layout:"default"},{name:"login",path:"/login",component:()=>i(()=>import("./login.b0c4ef6d.js"),["assets/login.b0c4ef6d.js","assets/vendor.6e3e509c.js"]),props:!0},{name:"logout",path:"/logout",component:()=>i(()=>import("./logout.04551e60.js"),["assets/logout.04551e60.js","assets/vendor.6e3e509c.js"]),props:!0},{name:"register",path:"/register",component:()=>i(()=>import("./register.dbe7625a.js"),["assets/register.dbe7625a.js","assets/vendor.6e3e509c.js"]),props:!0},{name:"scan",path:"/scan",component:()=>i(()=>import("./scan.87e992b2.js"),["assets/scan.87e992b2.js","assets/vendor.6e3e509c.js"]),props:!0},{name:"admin",path:"/admin",component:()=>i(()=>import("./index.46919193.js"),["assets/index.46919193.js","assets/vendor.6e3e509c.js"]),props:!0},{name:"superadmin",path:"/superadmin",component:()=>i(()=>import("./index.0da9ccc0.js"),["assets/index.0da9ccc0.js","assets/vendor.6e3e509c.js"]),props:!0,layout:"superadmin"}];var ne=(t,e)=>{const o=t.__vccOpts||t;for(const[n,r]of e)o[n]=r;return o};const se={};function ae(t,e){const o=f("router-view");return d(),S(o)}var ie=ne(se,[["render",ae]]);const v="http://127.0.0.1:3000/api",ce=oe(re),ue=x({history:N(),routes:ce}),le=$({state:{app:{name:"Registre"},token:"",role:"",name:"",user:"",usercount:0,admincount:0,superadmincount:0,offices:[],positions:[],employees:[],units:[]},mutations:{setUser(t,{role:e,name:o,user:n,token:r}){t.role=e,t.name=o,t.user=n,t.token=r},setUserCount(t,{user:e,admin:o,superadmin:n}){t.usercount=e,t.admincount=o,t.superadmincount=n}},actions:{async login({commit:t},{user:e,pass:o}){return await fetch(`${v}/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:e,pass:o})}).then(async n=>await n.json()).then(n=>(t("setUser",n),n)).catch(n=>({error:n.message||n.error}))},async usercount({commit:t}){return await fetch(`${v}/usercount`).then(async e=>await e.json()).then(e=>t("setUserCount",e)).catch(e=>({error:e.message||e.error}))},async register({commit:t,state:e},{name:o,user:n,pass:r}){const a=!!e.token;return await fetch(`${v}/register`,{method:"POST",headers:h({"Content-Type":"application/json"},((s,m)=>s?{Authorization:`Bearer ${m}`}:{})(a,e.token)),body:JSON.stringify({name:o,user:n,pass:r})}).then(s=>s.json()).then(s=>(t("setUser",s),s)).catch(s=>({error:s.message||s.error}))},logout({commit:t}){t("setUser",{token:"",role:0,name:"",user:""})}}}),y=C(ie);y.use(ue);y.use(le);y.mount("#app");export{ne as _};
